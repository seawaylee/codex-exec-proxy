# Copy this file to `.env` and adjust values as needed.

# --- Authentication ---
# If set, requests must include `Authorization: Bearer <PROXY_API_KEY>`
PROXY_API_KEY=

# --- Docker UID/GID Mapping ---
# Dockerビルド時にコンテナ内ユーザーをホストと同じUID/GIDで作成するための設定
HOST_UID=1000
HOST_GID=1000

# --- Codex Authentication (OAuth) ---
# Codex のOAuth（ChatGPTサインイン）はCodex CLI側で行います。
# 一度 `codex login` を実行すると、資格情報は `$CODEX_HOME/auth.json`
# （既定：`~/.codex/auth.json`）に保存され、このAPIからのCodex実行でも自動利用されます。
#
# 注意：`CODEX_HOME` はこの .env ではなく「OSの環境変数」として設定してください。
# 例: `export CODEX_HOME=/opt/codex`
#
# `PROXY_API_KEY` はこのAPIラッパーの外部アクセス制御用で、CodexのOAuth認証とは無関係です。
# ChatGPTログイン方式を使う場合は `OPENAI_API_KEY` は必須ではありません。

# --- Codex Authentication (API Key alternative) ---
# APIキー運用では、サーバー側で以下のいずれかを実施します：
#   1) `codex login --api-key "<YOUR_OPENAI_API_KEY>"` を実行して auth.json に保存（推奨）
#   2) 必要に応じて OS 環境変数 `OPENAI_API_KEY` を設定（Codex CLI が参照）
#
# 注意：`CODEX_LOCAL_ONLY=1` を有効にしていると、OpenAI のようなリモート base_url は拒否されます。
# APIキー運用時は通常 `CODEX_LOCAL_ONLY=false` のままにしてください。

# --- Rate limiting ---
# Requests allowed per minute per IP (0 to disable)
RATE_LIMIT_PER_MINUTE=60

# --- Codex CLI runtime ---
# Path to `codex` binary (in $PATH by default). Dockerイメージでは /usr/bin/codex に配置済み。
CODEX_PATH=codex

# Working directory where Codex can read/write
# NOTE: The server must have write access here. A read-only path causes
# `Failed to create CODEX_WORKDIR ... Read-only file system` at runtime.
CODEX_WORKDIR=/workspace

# Place wrapper-specific `AGENTS.md` files under this directory hierarchy.

# Optional: dedicate a separate Codex config directory for this API wrapper
# Leave empty to reuse CODEX_HOME (recommended for Docker compose setups)
CODEX_CONFIG_DIR=

# NOTE: Model selection is now automatic at startup. Remove any legacy CODEX_MODEL
# definition; the server will ignore it.

# Sandbox mode for Codex CLI (read-only | workspace-write | danger-full-access)
CODEX_SANDBOX_MODE=read-only

# Reasoning effort for the model (minimal | low | medium | high)
CODEX_REASONING_EFFORT=medium

# Ask Codex CLI to hide the model's reasoning/thinking text (true | false)
# Default false preserves the CLI's standard behaviour.
CODEX_HIDE_REASONING=false

# Restrict remote model providers to LOCAL ONLY (true | false)
# Default and recommended: false (to use the built‑in OpenAI provider).
# Set true only if you want to hard‑enforce local providers (e.g., Ollama).
CODEX_LOCAL_ONLY=false

# Explicitly allow API requests to use sandbox_mode="danger-full-access"
# Default is false for safety. Set to true only in trusted containers/VMs.
CODEX_ALLOW_DANGER_FULL_ACCESS=false

# Server-side timeout for Codex execution (seconds)
CODEX_TIMEOUT=120

# --- Advanced ---
# To use a different env file than ".env", set this in the OS env
# BEFORE starting the server (do not put it inside .env):
#   export CODEX_ENV_FILE=.env.local
# CODEX_ENV_FILE=.env.local
