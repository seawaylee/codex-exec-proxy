# 复制本文件为 `.env` 后按需修改。

# --- 代理鉴权 ---
# 设置后，请求必须携带 `Authorization: Bearer <PROXY_API_KEY>`
PROXY_API_KEY=

# --- Docker UID/GID 映射 ---
# 构建镜像时，让容器内用户 UID/GID 与宿主机保持一致。
HOST_UID=1000
HOST_GID=1000

# --- Codex 认证（OAuth） ---
# Codex 的 OAuth（ChatGPT 登录）由 Codex CLI 负责。
# 执行一次 `codex login` 后，凭据会保存到 `$CODEX_HOME/auth.json`
# （默认：`~/.codex/auth.json`），本 API 调用 Codex 时会自动复用。
#
# 注意：`CODEX_HOME` 需要作为“操作系统环境变量”设置，不要放在 .env。
# 示例：`export CODEX_HOME=/opt/codex`
#
# `PROXY_API_KEY` 仅控制本 API 包装器访问，与 Codex OAuth 认证无关。
# 使用 ChatGPT 登录方式时，`OPENAI_API_KEY` 不是必填项。

# --- Codex 认证（API Key 备选） ---
# API Key 模式下，服务端可选择以下任一方式：
#   1) 执行 `codex login --api-key "<YOUR_OPENAI_API_KEY>"` 并保存到 auth.json（推荐）
#   2) 按需设置操作系统环境变量 `OPENAI_API_KEY`（由 Codex CLI 读取）
#
# 注意：启用 `CODEX_LOCAL_ONLY=1` 时，会拒绝 OpenAI 这类远程 base_url。
# API Key 模式通常保持 `CODEX_LOCAL_ONLY=false`。

# --- 限流 ---
# 每个 IP 每分钟允许请求数（0 表示关闭限流）
RATE_LIMIT_PER_MINUTE=60

# --- Codex CLI 运行参数 ---
# `codex` 可执行文件路径（默认从 PATH 查找）。
CODEX_PATH=codex

# Codex 可读写的工作目录
# 注意：服务进程必须对该目录有写权限，否则会出现
# `Failed to create CODEX_WORKDIR ... Read-only file system` 错误。
CODEX_WORKDIR=/workspace

# 可在该目录树中放置包装器专用 `AGENTS.md`。

# 可选：为本包装器单独指定 Codex 配置目录
# 留空表示复用 CODEX_HOME（Docker Compose 推荐）
CODEX_CONFIG_DIR=

# 注意：模型选择已在启动时自动发现，旧的 CODEX_MODEL 会被忽略。

# Codex CLI 沙箱模式（read-only | workspace-write | danger-full-access）
CODEX_SANDBOX_MODE=read-only

# 推理强度（minimal | low | medium | high）
CODEX_REASONING_EFFORT=medium

# 是否让 Codex CLI 隐藏模型思考文本（true | false）
# 默认 false，保持 CLI 原始行为。
CODEX_HIDE_REASONING=false

# 是否强制仅允许本地模型提供方（true | false）
# 默认推荐 false（可使用内置 OpenAI 提供方）。
# 仅在你需要强制本地提供方（如 Ollama）时改为 true。
CODEX_LOCAL_ONLY=false

# 是否允许 API 请求使用 sandbox_mode="danger-full-access"
# 默认 false；仅在受信任容器/虚拟机中启用。
CODEX_ALLOW_DANGER_FULL_ACCESS=false

# Codex 执行超时时间（秒）
CODEX_TIMEOUT=300

# Codex 子进程最大并发数
CODEX_MAX_PARALLEL_REQUESTS=10

# 请求等待可用 Codex 执行槽位的最长时间（秒）
CODEX_QUEUE_TIMEOUT_SECONDS=30

# --- 高级选项 ---
# 如需加载非 `.env` 文件，请在启动前设置操作系统环境变量：
#   export CODEX_ENV_FILE=.env.local
# 不要写在 `.env` 文件内部。
# CODEX_ENV_FILE=.env.local
